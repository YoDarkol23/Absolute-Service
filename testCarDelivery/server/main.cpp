#include "server.hpp"
#include <iostream>

/**
 * –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞.
 * –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –Ω–∞ –¥–≤—É—Ö –ø–æ—Ä—Ç–∞—Ö:
 * - 8080 ‚Äî –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
 * - 8081 ‚Äî –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
 */
int main() {
    try {
        // –°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–µ—Ä: –æ–±—ã—á–Ω—ã–π –ø–æ—Ä—Ç = 8080, –∞–¥–º–∏–Ω-–ø–æ—Ä—Ç = 8081
        CarDeliveryServer server(8080, 8081);
        
        std::cout << "üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω!\n";
        std::cout << "   –û–±—ã—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: http://localhost:8080\n";
        std::cout << "   –ê–¥–º–∏–Ω–∫–∞:         http://localhost:8081\n";
        std::cout << "–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π...\n";

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ü–∏–∫–ª –ø—Ä–∏—ë–º–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
        server.run();
    } catch (const std::exception& e) {
        std::cerr << "‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: " << e.what() << std::endl;
        return 1;
    }
    return 0;
}