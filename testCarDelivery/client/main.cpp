/**
 * @file client/main.cpp
 * @brief Точка входа клиентского приложения.
 * 
 * Этот файл отвечает за:
 * - Вывод текстового меню пользователю
 * - Приём выбора пользователя
 * - Вызов соответствующих функций из client/client.hpp
 * - Передачу параметров подключения (IP, порт)
 * 
 * ВАЖНО: Вся сетевая логика (формирование HTTP-запросов) находится в client/client.cpp.
 * Здесь только управление потоком программы.
 */

#include <iostream>
#include <string>
#include "client.hpp"  // Подключаем API клиента

/**
 * Главная функция программы.
 * 
 * Поддерживает передачу IP-адреса сервера через аргумент командной строки:
 *   ./client                 → подключается к 127.0.0.1 (локальный сервер)
 *   ./client 192.168.1.35    → подключается к серверу с указанным IP
 * 
 * @param argc Количество аргументов командной строки
 * @param argv Массив аргументов
 * @return 0 при успешном завершении
 */
int main(int argc, char* argv[]) {
    // Определяем IP-адрес сервера: по умолчанию — localhost
    std::string server_ip = "127.0.0.1";

    // Если пользователь передал IP-адрес — используем его
    if (argc > 1) {
        server_ip = argv[1];
    }

    // Показываем пользователю, к какому серверу идёт подключение
    std::cout << "Подключение к серверу: " << server_ip << ":8080\n";
    std::cout << "==========================================\n";
	std::cout << "Добро пожаловать в систему расчета доставки авто!\n";

	int choice;
	do {
		display_main_menu();
		std::cin >> choice;
		std::cin.ignore(); // Очищаем буфер от \n после cin

		handle_user_choice(choice);

	} while (choice != 0);

	return 0;
}